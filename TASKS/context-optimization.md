# –ó–∞–¥–∞—á–∞: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: 52%)

## 1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### 1.1 –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏—Å—Ç–µ–º—ã:** AI Assistant Context (LLM context window)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: 52%
- –ü—Ä–æ–±–ª–µ–º–∞: nearing context limit
- –†–∏—Å–∫: –ø–æ—Ç–µ—Ä—è –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

1. **–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é —Å–µ—Å—Å–∏–∏**
   - –õ–æ–∫–∞—Ü–∏—è: Core system / Session management
   - –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
   - –í–ª–∏—è–Ω–∏–µ: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (52%)

2. **–ú–µ—Ö–∞–Ω–∏–∑–º —Å–∂–∞—Ç–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö**
   - –õ–æ–∫–∞—Ü–∏—è: Context management layer
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–∂–∞—Ç–∏–µ –∏–ª–∏ –æ–±–æ–±—â–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –í–ª–∏—è–Ω–∏–µ: –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–∏–º–∞—é—Ç —Ü–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ

3. **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**
   - –õ–æ–∫–∞—Ü–∏—è: Context filtering layer
   - –ü—Ä–æ–±–ª–µ–º–∞: –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
   - –í–ª–∏—è–Ω–∏–µ: –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã—Ç–µ—Å–Ω–µ–Ω–∞

4. **–ú–µ—Ö–∞–Ω–∏–∑–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –õ–æ–∫–∞—Ü–∏—è: External storage layer
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—ã–≥—Ä—É–∑–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - –í–ª–∏—è–Ω–∏–µ: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏

5. **–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**
   - –õ–æ–∫–∞—Ü–∏—è: Metrics/Logging layer
   - –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - –í–ª–∏—è–Ω–∏–µ: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞

### 1.2 –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå 52% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚ùå –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ—á–∏—Å—Ç–∫–∏ –∏–ª–∏ —Å–∂–∞—Ç–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–†–∏—Å–∫–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 100%:**
- üö® –ü–æ—Ç–µ—Ä—è –≤–∞–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏
- üö® –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ—à–µ–Ω–∏—è
- üö® –†–∞–∑—Ä—ã–≤ –ª–æ–≥–∏–∫–∏ –¥–∏–∞–ª–æ–≥–∞
- üö® –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ —Ä–µ–∑—é–º–∏—Ä–æ–≤–∞–Ω–∏—è
- üö® –°–Ω–∏–∂–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- ‚ö†Ô∏è –£—Ö—É–¥—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ (–ø–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- ‚ö†Ô∏è –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —É–∂–µ –æ–±—Å—É–∂–¥–µ–Ω–Ω—ã—Ö —Ç–µ–º
- ‚ö†Ô∏è –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
- ‚ö†Ô∏è –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚ö†Ô∏è –°–Ω–∏–∂–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

## 2. –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–º–µ–Ω—ã –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 2.1 –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è 1: –°–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ (Compression)**
```
–ü—Ä–∏–Ω—Ü–∏–ø: –°–∂–∞—Ç–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–æ –∫—Ä–∞—Ç–∫–∏—Ö —Ä–µ–∑—é–º–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Ä–æ–≥ —Å–∂–∞—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ 20 —Å–æ–æ–±—â–µ–Ω–∏–π)
2. –°–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è 1-20 –≤ —Ä–µ–∑—é–º–µ (1-2 –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞)
3. –£–¥–∞–ª–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è 1-20
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—é–º–µ –≤–º–µ—Å—Ç–æ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –°–Ω–∏–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ 60-80%
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–π —Å–≤—è–∑–Ω–æ—Å—Ç–∏

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- –ü–æ—Ç–µ—Ä—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –¢—Ä–µ–±—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è 2: –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ (Sliding Window)**
```
–ü—Ä–∏–Ω—Ü–∏–ø: –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ N –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å–æ–æ–±—â–µ–Ω–∏–π)
2. –ü—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª–∏—Ç—å —Å–∞–º–æ–µ —Å—Ç–∞—Ä–æ–µ
3. –°–æ—Ö—Ä–∞–Ω—è—Ç—å –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ < 50%
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- –ü–æ–ª–Ω–∞—è –ø–æ—Ç–µ—Ä—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è 3: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ (Priority-Based)**
```
–ü—Ä–∏–Ω—Ü–∏–ø: –ö–∞–∂–¥–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏ (user request, code, error, etc.)
2. –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: user requests, code snippets, errors
3. –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: system messages, greetings
4. –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —É–¥–∞–ª–∏—Ç—å –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∞–º–æ–π –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
- –†–∏—Å–∫ —É–¥–∞–ª–µ–Ω–∏—è –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è 4: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (Recommended)**
```
–ü—Ä–∏–Ω—Ü–∏–ø: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–∂–∞—Ç–∏—è –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. –†–∞–∑–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç—ã –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
2. –°–µ–≥–º–µ–Ω—Ç 1 (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç): –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –°–µ–≥–º–µ–Ω—Ç 2 (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç): —Å–æ–æ–±—â–µ–Ω–∏—è 11-30 - —Å–∂–∞—Ç—å
4. –°–µ–≥–º–µ–Ω—Ç 3 (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç): —Å–æ–æ–±—â–µ–Ω–∏—è 31+ - —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ —Å–∂–∞—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ –≤–Ω–µ—à–Ω–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ –æ–±—ä–µ–º–æ–º
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –¶–µ–ª–µ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: 30-40%
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –¢—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
```

### 2.2 –í—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:** –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–°—Ç—Ä–∞—Ç–µ–≥–∏—è 4)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ–±—ä–µ–º–æ–º
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ 30-40%
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø–æ–ª–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥:**
1. –§–∞–∑–∞ 1 (–ß–∞—Å 1): –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)
2. –§–∞–∑–∞ 2 (–ß–∞—Å 2-4): –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∂–∞—Ç–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞ 2
3. –§–∞–∑–∞ 3 (–ß–∞—Å 5-8): –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞ 3
4. –§–∞–∑–∞ 4 (–ß–∞—Å 9+): –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## 3. –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

### 3.1 –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–µ–ª–∏

**–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å:**
- –°–Ω–∏–∑–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å 52% –¥–æ 35-40% –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ü–æ–¥—Ü–µ–ª–∏:**
1. üéØ –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
2. üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–∂–∞—Ç–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
3. üéØ –í–Ω–µ–¥—Ä–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
4. üéØ –û–±–µ—Å–ø–µ—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
5. üéØ –°–Ω–∏–∑–∏—Ç—å —Ä–∏—Å–∫ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ 80%
6. üéØ –í–Ω–µ–¥—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞

### 3.2 –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚â§ 40% (—Ç–µ–∫—É—â–∏–π: 52%)
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –Ω–µ —É–≤–µ–ª–∏—á–µ–Ω–æ > 5%
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ‚â• 30% –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞ < 2 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü–æ—Ä–æ–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: 70% (—Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º)
- ‚úÖ –ü–æ—Ä–æ–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: 85%

**–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- ‚úÖ –ù–µ—Ç –∂–∞–ª–æ–± –Ω–∞ –ø–æ—Ç–µ—Ä—é –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Ä–µ—à–µ–Ω–∏—è –∏–∑ —Ä–∞–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3.3 –ß–µ—Ç–∫–∏–µ —à–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### –≠—Ç–∞–ø 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ (–ß–∞—Å 1)

**–®–∞–≥ 1.1: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
```typescript
// context-monitor.ts
interface ContextMetrics {
  totalTokens: number
  usedTokens: number
  usagePercentage: number
  messageCount: number
  averageTokensPerMessage: number
  projectedFullness: Date | null
}

class ContextMonitor {
  private metrics: ContextMetrics
  private thresholdWarning = 70
  private thresholdCritical = 85

  updateMetrics(newMessage: string): void {
    // –†–∞—Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    this.metrics.usedTokens = this.calculateTokens(newMessage)
    this.metrics.usagePercentage = (this.metrics.usedTokens / this.metrics.totalTokens) * 100

    if (this.metrics.usagePercentage >= this.thresholdCritical) {
      this.triggerCriticalAlert()
    } else if (this.metrics.usagePercentage >= this.thresholdWarning) {
      this.triggerWarning()
    }
  }

  getMetrics(): ContextMetrics {
    return this.metrics
  }
}
```

**–®–∞–≥ 1.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º—É**
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –°–æ–∑–¥–∞—Ç—å dashboard –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ú–æ–¥—É–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–∫—Ç–∏–≤–µ–Ω
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –õ–æ–≥–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –≠—Ç–∞–ø 2: –°–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ (–ß–∞—Å 2-4)

**–®–∞–≥ 2.1: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å–∂–∞—Ç–∏—è**
```typescript
// context-compressor.ts
interface CompressedMessage {
  type: 'summary' | 'compressed'
  originalCount: number
  content: string
  timestamp: Date
  priority: number
}

class ContextCompressor {
  compressMessages(messages: Message[], threshold: number): CompressedMessage[] {
    const messagesToCompress = messages.slice(0, threshold)
    const messagesToKeep = messages.slice(threshold)

    const summary = this.generateSummary(messagesToCompress)
    const compressed: CompressedMessage = {
      type: 'summary',
      originalCount: messagesToCompress.length,
      content: summary,
      timestamp: new Date(),
      priority: this.calculatePriority(messagesToCompress)
    }

    return [compressed, ...messagesToKeep]
  }

  generateSummary(messages: Message[]): string {
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∑—é–º–µ
    // –§–æ—Ä–º–∞—Ç: –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è, –∫–æ–¥–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø—Ä–æ–±–ª–µ–º—ã
    return "–†–µ–∑—é–º–µ: [–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±—Å—É–∂–¥–µ–Ω–Ω–æ–≥–æ]"
  }
}
```

**–®–∞–≥ 2.2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞**
- –¢–µ—Å—Ç –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∂–∞—Ç–∏—è (–ø–æ—Ç–µ—Ä—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ê–ª–≥–æ—Ä–∏—Ç–º —Å–∂–∞—Ç–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –¢–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç ‚â§ 10% –ø–æ—Ç–µ—Ä–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –°–∂–∞—Ç–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—ä–µ–º –Ω–∞ 60-70%

#### –≠—Ç–∞–ø 3: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è (–ß–∞—Å 5-8)

**–®–∞–≥ 3.1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞**
```typescript
// priority-calculator.ts
interface PriorityScore {
  score: number
  reason: string
}

class PriorityCalculator {
  calculatePriority(message: Message): PriorityScore {
    let score = 0
    let reasons: string[] = []

    // –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
    if (message.isUserRequest) {
      score += 50
      reasons.push('User request')
    }

    if (message.containsCode) {
      score += 30
      reasons.push('Contains code')
    }

    if (message.containsError) {
      score += 40
      reasons.push('Contains error')
    }

    if (message.type === 'system') {
      score -= 20
      reasons.push('System message')
    }

    if (message.isGreeting) {
      score -= 30
      reasons.push('Greeting')
    }

    return { score, reason: reasons.join(', ') }
  }
}
```

**–®–∞–≥ 3.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∂–∞—Ç–∏—è –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏**
```typescript
// context-manager.ts (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
class ContextManager {
  private messages: Message[]
  private monitor: ContextMonitor
  private compressor: ContextCompressor
  private priorityCalculator: PriorityCalculator

  async addMessage(message: Message): Promise<void> {
    // 1. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    const priority = this.priorityCalculator.calculatePriority(message)

    // 2. –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    this.messages.push({ ...message, priority })

    // 3. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
    this.monitor.updateMetrics(message)

    // 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    if (this.monitor.getMetrics().usagePercentage >= 60) {
      await this.optimizeContext()
    }
  }

  async optimizeContext(): Promise<void> {
    const metrics = this.monitor.getMetrics()

    // –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
    const segment1 = this.messages.slice(-10) // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    const segment2 = this.messages.slice(-30, -10) // –°–æ–æ–±—â–µ–Ω–∏—è 11-30 - —Å–∂–∞—Ç—å
    const segment3 = this.messages.slice(0, -30) // –°–æ–æ–±—â–µ–Ω–∏—è 31+ - –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

    // –°–∂–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç 2
    const compressedSegment2 = await this.compressor.compressMessages(segment2)

    // –£–¥–∞–ª–∏—Ç—å –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–∞ 3
    const highPrioritySegment3 = segment3
      .filter(m => m.priority.score > 20)
      .slice(0, 5) // –ú–∞–∫—Å–∏–º—É–º 5 —Å–æ–æ–±—â–µ–Ω–∏–π

    // –°–æ–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    this.messages = [...highPrioritySegment3, ...compressedSegment2, ...segment1]
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –≠—Ç–∞–ø 4: –í–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–ß–∞—Å 9-12)

**–®–∞–≥ 4.1: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫—ç—à–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**
```typescript
// context-cache.ts
interface CachedContext {
  id: string
  timestamp: Date
  messages: Message[]
  metadata: {
    totalMessages: number
    keyTopics: string[]
    summary: string
  }
}

class ContextCache {
  private cache: Map<string, CachedContext>
  private maxCacheSize = 10

  async store(context: ContextManager): Promise<void> {
    const cached: CachedContext = {
      id: this.generateId(),
      timestamp: new Date(),
      messages: context.getMessages(),
      metadata: {
        totalMessages: context.getMessageCount(),
        keyTopics: this.extractTopics(context.getMessages()),
        summary: this.generateQuickSummary(context.getMessages())
      }
    }

    this.cache.set(cached.id, cached)
    this.evictIfNeeded()
  }

  async restore(id: string): Promise<Message[]> {
    const cached = this.cache.get(id)
    return cached?.messages || []
  }
}
```

**–®–∞–≥ 4.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º**
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ ContextManager
class ContextManager {
  private cache: ContextCache

  async optimizeContext(): Promise<void> {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ ...

    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –∫—ç—à –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
    if (segment3.length > 0) {
      await this.cache.store(this)
    }

    // –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ ID –∫—ç—à–∞
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ö—ç—à –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–∑–¥–∞–Ω
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –í–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

#### –≠—Ç–∞–ø 5: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ UI (–ß–∞—Å 13-16)

**–®–∞–≥ 5.1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
```typescript
// notification-system.ts
interface Notification {
  level: 'info' | 'warning' | 'critical'
  message: string
  action: string
  timestamp: Date
}

class NotificationSystem {
  notify(metrics: ContextMetrics): void {
    if (metrics.usagePercentage >= 85) {
      this.showCriticalNotification()
    } else if (metrics.usagePercentage >= 70) {
      this.showWarningNotification()
    }
  }

  private showCriticalNotification(): void {
    const notification: Notification = {
      level: 'critical',
      message: '–ö–æ–Ω—Ç–µ–∫—Å—Ç –±–ª–∏–∑–æ–∫ –∫ –ø—Ä–µ–¥–µ–ª—É! –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è.',
      action: 'auto-optimizing',
      timestamp: new Date()
    }

    this.display(notification)
  }
}
```

**–®–∞–≥ 5.2: –°–æ–∑–¥–∞–Ω–∏–µ dashboard**
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ì—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏
- –°–ø–∏—Å–æ–∫ —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∂–∞—Ç–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 3.4 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

#### Unit —Ç–µ—Å—Ç—ã

**–¢–µ—Å—Ç—ã –º–æ–¥—É–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```typescript
describe('ContextMonitor', () => {
  it('–¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ', () => {
    const monitor = new ContextMonitor()
    monitor.updateMetrics('test message')
    expect(monitor.getMetrics().usagePercentage).toBeLessThan(10)
  })

  it('–¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ 70%', () => {
    const monitor = new ContextMonitor()
    // –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ 70%
    expect(warningTriggered).toBe(true)
  })

  it('–¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ 85%', () => {
    const monitor = new ContextMonitor()
    // –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ 85%
    expect(criticalTriggered).toBe(true)
  })
})
```

**–¢–µ—Å—Ç—ã –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞:**
```typescript
describe('ContextCompressor', () => {
  it('–¥–æ–ª–∂–µ–Ω —Å–∂–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏', () => {
    const compressor = new ContextCompressor()
    const messages = generateTestMessages(20)
    const compressed = compressor.compressMessages(messages, 10)

    expect(compressed.length).toBeLessThan(messages.length)
    expect(compressed[0].type).toBe('summary')
  })

  it('–¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–µ –º–µ–Ω–µ–µ 90% –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏', () => {
    const messages = generateTestMessages(20)
    const compressed = compressor.compressMessages(messages, 10)

    const informationLoss = calculateInformationLoss(messages, compressed)
    expect(informationLoss).toBeLessThan(10)
  })
})
```

**–¢–µ—Å—Ç—ã –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏:**
```typescript
describe('PriorityCalculator', () => {
  it('–¥–æ–ª–∂–µ–Ω –¥–∞–≤–∞—Ç—å –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç user requests', () => {
    const calculator = new PriorityCalculator()
    const score = calculator.calculatePriority(createUserRequestMessage())
    expect(score.score).toBeGreaterThan(40)
  })

  it('–¥–æ–ª–∂–µ–Ω –¥–∞–≤–∞—Ç—å –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç system messages', () => {
    const calculator = new PriorityCalculator()
    const score = calculator.calculatePriority(createSystemMessage())
    expect(score.score).toBeLessThan(10)
  })

  it('–¥–æ–ª–∂–µ–Ω —É—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–¥–∞', () => {
    const messageWithCode = createMessageWithCode()
    const messageWithoutCode = createMessageWithoutCode()

    const scoreWithCode = calculator.calculatePriority(messageWithCode)
    const scoreWithoutCode = calculator.calculatePriority(messageWithoutCode)

    expect(scoreWithCode.score).toBeGreaterThan(scoreWithoutCode.score)
  })
})
```

#### Integration —Ç–µ—Å—Ç—ã

```typescript
describe('ContextManager Integration', () => {
  it('–¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ 60%', async () => {
    const manager = new ContextManager()
    // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ 60%
    await manager.addMessage(generateLongMessage())

    const metrics = manager.getMetrics()
    expect(metrics.usagePercentage).toBeLessThan(50)
  })

  it('–¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –∫—ç—à', async () => {
    const manager = new ContextManager()
    const cache = manager.getCache()

    // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
    await manager.fillContext()

    const cached = await cache.getLatest()
    expect(cached).toBeDefined()
    expect(cached.messages.length).toBeGreaterThan(0)
  })

  it('–¥–æ–ª–∂–µ–Ω –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∫—ç—à–∞', async () => {
    const manager = new ContextManager()
    const cache = manager.getCache()
    const originalMessages = generateTestMessages(50)

    await cache.store(originalMessages)
    const restored = await cache.restore(cache.getLatestId())

    expect(restored.length).toBe(originalMessages.length)
  })
})
```

#### E2E —Ç–µ—Å—Ç—ã

```typescript
describe('E2E Context Optimization', () => {
  it('–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –∑–∞–≥—Ä—É–∑–∫–∞ ‚Üí —Å–∂–∞—Ç–∏–µ ‚Üí –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ', async () => {
    // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
    const manager = new ContextManager()
    await manager.loadHistoricalMessages(100)

    // 2. –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∂–∞—Ç–∏—è
    await waitForOptimization()

    // 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∂–∞—Ç–∏–µ
    const metrics = manager.getMetrics()
    expect(metrics.usagePercentage).toBeLessThan(45)

    // 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∫—ç—à–∞
    const restored = await manager.restoreFromCache()

    // 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
    expect(restored.length).toBeGreaterThan(50)
  })

  it('—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏', async () => {
    const manager = new ContextManager()
    const startTime = Date.now()

    // –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω—É—é —Å–µ—Å—Å–∏—é (200 —Å–æ–æ–±—â–µ–Ω–∏–π)
    for (let i = 0; i < 200; i++) {
      await manager.addMessage(generateRandomMessage())
      await delay(100) // 100ms –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
    }

    const duration = Date.now() - startTime
    const metrics = manager.getMetrics()

    // –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
    expect(duration).toBeLessThan(25000) // 25 —Å–µ–∫—É–Ω–¥
    expect(metrics.usagePercentage).toBeLessThan(45)
    expect(metrics.warningCount).toBeLessThan(5)
  })
})
```

#### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Å—Ç 1: –°–∂–∞—Ç–∏–µ –¥–ª–∏–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏**
- –ó–∞–≥—Ä—É–∑–∏—Ç—å 100+ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ—Å—Å–∏—é
- –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∂–∞—Ç–∏–µ–º
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∑—é–º–µ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)

**–¢–µ—Å—Ç 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞**
- –î–æ–∂–¥–∞—Ç—å—Å—è —Å–∂–∞—Ç–∏—è
- –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω–æ—Ç—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–¢–µ—Å—Ç 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –¥–æ –∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Ä–µ–º—è –Ω–µ —É–≤–µ–ª–∏—á–µ–Ω–æ > 5%
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CPU –∏ memory –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–¢–µ—Å—Ç 4: –ö—Ä–∞–µ–≤—ã–µ —Å–ª—É—á–∞–∏**
- –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (> 10K —Ç–æ–∫–µ–Ω–æ–≤)
- –ú–Ω–æ–≥–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (> 500)
- –°–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∫–æ–¥, —Ç–µ–∫—Å—Ç, –æ—à–∏–±–∫–∏)

### 3.5 –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (1-2 –¥–Ω—è):**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–Ω–∏–∂–µ–Ω–æ —Å 52% –¥–æ 35-40%
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–∫—Ç–∏–≤–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∏ 70% –∏ 85%

**–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (1 –Ω–µ–¥–µ–ª—è):**
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ 30-40%
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –∂–∞–ª—É—é—Ç—Å—è –Ω–∞ –ø–æ—Ç–µ—Ä—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –Ω–µ —É—Ö—É–¥—à–µ–Ω–∞
- ‚úÖ –ö—ç—à –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (1 –º–µ—Å—è—Ü):**
- ‚úÖ –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –≤ 95% —Å–ª—É—á–∞–µ–≤
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∂–∞—Ç–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (‚â• 70% —Å–∂–∞—Ç–∏—è)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## 4. –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏

### 4.1 –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**–ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ (Blue-Green deployment):**

–§–∞–∑–∞ 1: –¢–µ–Ω–µ–≤–æ–π —Ä–µ–∂–∏–º (Shadow Mode) - –ß–∞—Å 1-4
```
1. –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏)
2. –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ
3. –°—Ä–∞–≤–Ω–∏—Ç—å —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π

–ö—Ä–∏—Ç–µ—Ä–∏–π –ø–µ—Ä–µ—Ö–æ–¥–∞:
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–º
- –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

–§–∞–∑–∞ 2: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (Parallel) - –ß–∞—Å 5-12
```
1. –í–∫–ª—é—á–∏—Ç—å —Å–∂–∞—Ç–∏–µ –≤ read-only —Ä–µ–∂–∏–º–µ
2. –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–∂–∞—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
3. –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∂–∞—Ç–∏—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–∞–º–∏
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º —Å–∂–∞—Ç–∏—è

–ö—Ä–∏—Ç–µ—Ä–∏–π –ø–µ—Ä–µ—Ö–æ–¥–∞:
- –°–∂–∞—Ç–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–æ—Ç–µ—Ä—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ ‚â§ 10%
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–µ–Ω–∞
```

–§–∞–∑–∞ 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º (Hybrid) - –ß–∞—Å 13-20
```
1. –í–∫–ª—é—á–∏—Ç—å —Å–∂–∞—Ç–∏–µ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞ 2 (—Å–æ–æ–±—â–µ–Ω–∏—è 11-30)
2. –û—Å—Ç–∞–≤–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç 1 –∏ 3 –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤
4. –°–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å

–ö—Ä–∏—Ç–µ—Ä–∏–π –ø–µ—Ä–µ—Ö–æ–¥–∞:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚â§ 45%
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã –∫–∞—á–µ—Å—Ç–≤–æ–º
- –ù–µ—Ç –∂–∞–ª–æ–± –Ω–∞ –ø–æ—Ç–µ—Ä—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
```

–§–∞–∑–∞ 4: –ü–æ–ª–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ (Full) - –ß–∞—Å 21+
```
1. –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é (–≤—Å–µ —Å–µ–≥–º–µ–Ω—Ç—ã)
2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—é
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫—ç—à –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
4. –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ö—Ä–∏—Ç–µ—Ä–∏–π –ø–µ—Ä–µ—Ö–æ–¥–∞:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚â§ 40%
- –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
```

### 4.2 –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ (Rollback Plan)

**–£—Å–ª–æ–≤–∏—è –æ—Ç–∫–∞—Ç–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ > 50% –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü–æ—Ç–µ—Ä—è –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ > 15%
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ —É–≤–µ–ª–∏—á–µ–Ω–æ > 20%
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–ª–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π > 5% –æ—Ç –æ–±—â–µ–≥–æ

**–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ—Ç–∫–∞—Ç–∞:**
1. –û—Ç–∫–ª—é—á–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é (–≤—ã–∫–ª—é—á–∏—Ç—å —Ñ–ª–∞–≥ feature flag)
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –±—ç–∫–∞–ø–∞
3. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω—ã –Ω–µ—É–¥–∞—á–∏
4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
5. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏

**–í—Ä–µ–º—è –æ—Ç–∫–∞—Ç–∞:** < 15 –º–∏–Ω—É—Ç

### 4.3 –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Å—Ç–æ—è

**–¶–µ–ª—å:** < 5 –º–∏–Ω—É—Ç –ø—Ä–æ—Å—Ç–æ—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
1. Feature flags - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2. Graceful degradation - –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
3. Background processing - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ
4. Warm-up - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

## 5. –ú–µ—Ö–∞–Ω–∏–∑–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 5.1 –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –º–µ—Ç—Ä–∏–∫–∏:**
- `context_usage_percentage` - —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `context_available_tokens` - –¥–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- `context_used_tokens` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- `context_message_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- `context_compression_ratio` - –ø—Ä–æ—Ü–µ–Ω—Ç —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `context_last_optimization` - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `context_optimization_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∑–∞ —Å–µ—Å—Å–∏—é
- `context_cache_size` - —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- `context_priority_distribution` - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

**–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–ø–æ –≤—Ä–µ–º–µ–Ω–∏):**
- `avg_context_usage_1h` - —Å—Ä–µ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞ —á–∞—Å
- `max_context_usage_24h` - –º–∞–∫—Å–∏–º—É–º –∑–∞ 24 —á–∞—Å–∞
- `compression_efficiency` - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∂–∞—Ç–∏—è (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã / –∏—Å—Ö–æ–¥–Ω—ã–µ)
- `optimization_frequency` - —á–∞—Å—Ç–æ—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
- `user_satisfaction_score` - —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏)

### 5.2 –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤

**–£—Ä–æ–≤–Ω–∏ –∞–ª–µ—Ä—Ç–æ–≤:**

INFO (50-70%):
```
–°–æ–æ–±—â–µ–Ω–∏–µ: "–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ X%"
–î–µ–π—Å—Ç–≤–∏—è: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
–¶–≤–µ—Ç: –ó–µ–ª–µ–Ω—ã–π
```

WARNING (70-85%):
```
–°–æ–æ–±—â–µ–Ω–∏–µ: "–ö–æ–Ω—Ç–µ–∫—Å—Ç –±–ª–∏–∑–æ–∫ –∫ –ø—Ä–µ–¥–µ–ª—É (X%). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è."
–î–µ–π—Å—Ç–≤–∏—è: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
–¶–≤–µ—Ç: –ñ–µ–ª—Ç—ã–π
```

CRITICAL (85-95%):
```
–°–æ–æ–±—â–µ–Ω–∏–µ: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (X%). –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è."
–î–µ–π—Å—Ç–≤–∏—è: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
–¶–≤–µ—Ç: –ö—Ä–∞—Å–Ω—ã–π
```

EMERGENCY (95-100%):
```
–°–æ–æ–±—â–µ–Ω–∏–µ: "–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ—Å—Ç–∏–≥ –ø—Ä–µ–¥–µ–ª–∞! –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ."
–î–µ–π—Å—Ç–≤–∏—è: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–¶–≤–µ—Ç: –ö—Ä–∞—Å–Ω—ã–π + –º–∏–≥–∞–Ω–∏–µ
```

### 5.3 Dashboard –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã dashboard:**

1. **–ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:**
   - –ö—Ä—É–≥–æ–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (0-100%)
   - –¶–≤–µ—Ç: –ó–µ–ª–µ–Ω—ã–π ‚Üí –ñ–µ–ª—Ç—ã–π ‚Üí –ö—Ä–∞—Å–Ω—ã–π
   - –¢–µ–∫—Å—Ç: "X% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ (Y/X —Ç–æ–∫–µ–Ω–æ–≤)"

2. **–ì—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
   - –õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ—á–µ–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - –¢—Ä–µ–Ω–¥ (—Ä–∞—Å—Ç–µ—Ç/–ø–∞–¥–∞–µ—Ç)

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∂–∞—Ç–∏—è:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ü—Ä–æ—Ü–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤

4. **–°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:**
   - –í—Ä–µ–º—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –¢–∏–ø –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è/—Ä—É—á–Ω–∞—è)

5. **–ö—ç—à –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π
   - –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 5.4 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

**–õ–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π:**
```typescript
interface ContextEvent {
  timestamp: Date
  eventType: 'message_added' | 'optimization_started' | 'optimization_completed' | 'warning' | 'critical' | 'restored'
  details: {
    contextSize?: number
    contextPercentage?: number
    compressedMessages?: number
    compressionRatio?: number
    reason?: string
  }
}

class ContextLogger {
  log(event: ContextEvent): void {
    // –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥
    // –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã
    // –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –±—É–¥—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  }

  analyzePatterns(): Analytics {
    // –í—ã—è–≤–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    // –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    return {
      averageDailyUsage: number,
      peakHours: number[],
      compressionEfficiency: number
    }
  }
}
```

**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**
- –ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ —Å–µ—Å—Å–∏–∏ –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å–∂–∞—Ç–∏—è
- –ß–∞—Å—Ç–æ—Ç–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Ç–∏–ø–æ–º –∑–∞–¥–∞—á –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## 6. –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ä—ã

### 6.1 –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```typescript
class AdaptiveOptimizer {
  private history: OptimizationHistory[]

  async learnFromHistory(): Promise<OptimizationStrategy> {
    // –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—à–ª—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    const patterns = this.identifyPatterns(this.history)

    // –í—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
    if (patterns.longSessions) {
      return 'aggressive_compression'
    } else if (patterns.codeHeavy) {
      return 'priority_based'
    } else {
      return 'balanced'
    }
  }
}
```

### 6.2 –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

```typescript
class PredictiveNotifier {
  predictThresholdReached(currentMetrics: ContextMetrics): Date | null {
    // –ù–∞ –æ—Å–Ω–æ–≤–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç 85%
    const fillRate = this.calculateFillRate(currentMetrics)
    const remainingCapacity = 100 - currentMetrics.usagePercentage

    if (fillRate > 0 && remainingCapacity > 0) {
      const minutesToThreshold = remainingCapacity / fillRate
      return new Date(Date.now() + minutesToThreshold * 60 * 1000)
    }

    return null
  }
}
```

### 6.3 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```typescript
class AutoTuner {
  async tuneParameters(metrics: ContextMetrics): Promise<Configuration> {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    const config = {
      compressionThreshold: this.calculateOptimalThreshold(metrics),
      warningLevel: this.calculateWarningLevel(metrics),
      priorityWeights: this.calculatePriorityWeights(metrics)
    }

    return config
  }
}
```

## 7. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Timeline)

### –ù–µ–¥–µ–ª—è 1: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –î–µ–Ω—å 1-2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- –î–µ–Ω—å 3-5: –°–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- –î–µ–Ω—å 6-7: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

### –ù–µ–¥–µ–ª—è 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–µ–Ω—å 8-10: –ö–æ–Ω—Ç–µ–∫—Å—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
- –î–µ–Ω—å 11-12: –í–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–∫—ç—à)
- –î–µ–Ω—å 13-14: Unit —Ç–µ—Å—Ç—ã
- –î–µ–Ω—å 15-17: Integration —Ç–µ—Å—Ç—ã

### –ù–µ–¥–µ–ª—è 3: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –î–µ–Ω—å 18-20: E2E —Ç–µ—Å—Ç—ã –∏ —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–µ–Ω—å 21-23: Dashboard –∏ UI
- –î–µ–Ω—å 24-26: –ü–ª–∞–≤–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (—Ñ–∞–∑—ã 1-3)
- –î–µ–Ω—å 27-28: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ù–µ–¥–µ–ª—è 4: –£–ª—É—á—à–µ–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –î–µ–Ω—å 29-30: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –î–µ–Ω—å 31-32: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
- –î–µ–Ω—å 33-34: –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –î–µ–Ω—å 35: –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (—Ñ–∞–∑–∞ 4)

## 8. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫–∏

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|-------|--------------|-----------|-----------|
| –ü–æ—Ç–µ—Ä—è –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è |
| –°–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ |
| –°–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ | –°—Ä–µ–¥–Ω—è—è | –ù–∏–∑–∫–æ–µ | –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –æ–±—É—á–µ–Ω–∏–µ |
| –û—à–∏–±–∫–∏ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ —Å–∂–∞—Ç–∏—è | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | Unit —Ç–µ—Å—Ç—ã, E2E —Ç–µ—Å—Ç—ã, rollback –ø–ª–∞–Ω |

## 9. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è 52% –¥–æ —Ü–µ–ª–µ–≤–æ–≥–æ 35-40%. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –ø–æ–∑–≤–æ–ª–∏—Ç:

- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏
- ‚úÖ –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–ª–∞–≤–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π ROI:**
- –°–Ω–∏–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ 20-25%
- –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ (–º–µ–Ω—å—à–µ –ø–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∂–∞–ª–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ 80%
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –Ω–∞ 15%
