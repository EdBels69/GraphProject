# Changelog

Все изменения в проекте Graph Analyser задокументированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [1.1.0] - 2026-01-07

### Added
- **Загрузка файлов**
  - Компонент FileUploader с поддержкой drag & drop
  - Парсинг файлов форматов CSV, JSON, BibTeX
  - Валидация загружаемых файлов
  - Поддержка файлов до 10 МБ

- **Интеграция с PubMed API**
  - Сервис pubmedService для работы с PubMed
  - API endpoints для поиска статей (/pubmed/search)
  - API endpoint для создания сетей цитирований (/pubmed/network)
  - API endpoint для получения деталей статьи (/pubmed/article/:pmid)
  - Автоматическое извлечение цитирований из PubMed
  - Retry логика для сетевых запросов
  - Поддержка пагинации результатов

- **Кэширование результатов анализа**
  - CacheManager для in-memory кэширования
  - Автоматическое кэширование кратчайших путей (10 минут)
  - Автоматическое кэширование метрик центральности (15 минут)
  - LRU eviction для управления памятью
  - Автоматическая очистка истекших записей
  - Статистика использования кэша

- **CRUD операции с графами в БД**
  - Полная реализация saveGraphToDb() в Database
  - Полная реализация getGraphFromDb() в Database
  - Реализация getAllGraphs() для получения всех графов
  - Реализация deleteGraph() для удаления графов
  - Поддержка UPSERT операций (ON CONFLICT)
  - Автоматическая загрузка графов при старте сервера
  - Новые таблицы: graphs, graph_nodes, graph_edges
  - Индексы для оптимизации запросов

- **Валидация данных**
  - Модуль validators.ts с функциями валидации
  - Валидация статей (validateArticle)
  - Валидация графов (validateGraph)
  - Валидация URL (validateURL)
  - Валидация файлов (validateFileUpload)
  - Валидация PubMed запросов (validatePubMedQuery)
  - Подробные сообщения об ошибках

- **Обработка ошибок**
  - Классы кастомных ошибок (AppError, ValidationError, etc.)
  - Улучшенный ErrorHandler для Express
  - Глобальный обработчик ошибок
  - Логирование всех ошибок

- **Конфигурация разработки**
  - ESLint конфигурация (.eslintrc.cjs)
  - Prettier конфигурация (.prettierrc)
  - Обновленная конфигурация Vitest
  - Покрытие тестами 80% по умолчанию

### Changed
- **Оптимизация производительности**
  - Оптимизация парсинга файлов (chunked чтение)
  - Улучшенная обработка больших CSV файлов
  - Кэширование результатов вычислений
  - Batch операции для SQLite

- **Улучшение кода**
  - Замена всех console.log на logger
  - Приведение кода к единому стилю
  - Исправление типизации (Database vs DatabaseManager)
  - Устранение дублирования кода
  - Добавление JSDoc комментариев

- **Обновление зависимостей**
  - React 18.3.1
  - Vite 6.1.0
  - Zustand 5.0.2
  - Axios 1.7.9
  - Vitest 3.0.7

### Fixed
- **Критические исправления**
  - Исправлена проблема с загрузкой больших файлов (использование buffer)
  - Исправлена проблема с типизацией Database
  - Исправлены утечки памяти в кэше
  - Исправлена проблема с UPSERT в SQLite

- **Мелкие исправления**
  - Исправлено отображение ошибок валидации
  - Исправлен парсинг BibTeX с множественными авторами
  - Исправлен парсинг CSV с кавычками
  - Исправлена обработка ошибок в API routes
  - Исправлены проблемы с кодировкой файлов

### Security
- Валидация всех входных данных на сервере
- Санитизация загруженных файлов
- Проверка размеров файлов перед обработкой
- Безопасное хранение ошибок в логах

### Documentation
- Полностью обновлен README.md
- Добавлены примеры использования новых функций
- Добавлена документация API endpoints
- Добавлено руководство по устранению неполадок
- Создан CHANGELOG.md

### Testing
- Добавлены тесты для validators.test.ts
- Добавлены тесты для fileParser.test.ts
- Добавлены тесты для CacheManager.test.ts
- Обновлен файл настройки тестов (setup.ts)
- Настроена конфигурация покрытия тестов (80%)

---

## [1.0.0] - 2025-12-XX

### Added
- Начальная реализация приложения Graph Analyser
- Frontend на React + TypeScript + Vite
- Backend на Express + TypeScript
- Визуализация графов с Cytoscape.js
- State management с Zustand
- Графовые алгоритмы (путь, центральность, сообщества)
- Страницы: HomePage, AnalysisPage, GraphVisualizationPage, StatisticsPage, ResearchGapsPage, ExportDataPage
- API для статей и графов
- Логирование операций
- Управление сессиями

---

## Типы изменений

- **Added** - Новые функции
- **Changed** - Изменения в существующих функциях
- **Deprecated** - Функции, которые будут удалены в будущих версиях
- **Removed** - Удаленные функции
- **Fixed** - Исправления багов
- **Security** - Исправления безопасности
